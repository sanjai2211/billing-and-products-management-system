datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  email       String  @unique
  password    String
  name        String?
  phoneNumber String?
  Shop        Shop?
}

model Shop {
  id           String    @id @default(auto()) @map("_id") @db.ObjectId
  name         String
  address      Address?
  email        String?
  phoneNumbers String[]
  user         User      @relation(fields: [userId], references: [id])
  userId       String    @unique @db.ObjectId
  productCode  String    @default("PROD")
  products     Product[]
}

type Address {
  addressLine1 String
  addressLine2 String
  city         String
  state        String
  zip          String
}

model Product {
  id           String         @id @default(auto()) @map("_id") @db.ObjectId
  code         String
  productName  String?
  printName    String?
  category     String?
  unit         String?
  group        String?
  brand        String?
  cost         String?
  mrp          String?
  purchaseRate String?
  salesRate    String?
  gstPurchase  String?
  gstSales     String?
  igstPurchase String?
  igstSales    String?
  hsnCode      String?
  openStock    String?
  stockValue   String?
  status       ProductStatus?
  createdAt    DateTime       @default(now())
  shopId       String         @db.ObjectId
  Shop         Shop?          @relation(fields: [shopId], references: [id])
}

enum ProductStatus {
  AVAILABLE
  BACKORDER
  CLEARANCE
  COMING_SOON
  DISCONTINUED
  DRAFT
  IN_PRODUCTION
  LIMITED_EDITION
  NEW_ARRIVAL
  ON_SALE
  OUT_OF_SEASON
  OUT_OF_STOCK
  PENDING
  PREORDER
  RECALLED
  RESERVED
  UNAVAILABLE
}
